com.google.javascript.jscomp.FunctionTypeBuilder

184c184,185
<       if (!type.isSubtype(typeRegistry.getNativeType(OBJECT_TYPE))) {
---
>       if (!type.restrictByNotNullOrUndefined().isSubtype(
>               typeRegistry.getNativeType(OBJECT_TYPE))) {


com.google.javascript.rhino.jstype.FunctionType

869a870
>     //
870a872,878
>     //
>     // TODO(nicksantos): In ES3, the runtime coerces "null" to the global
>     // activation object. In ES5, it leaves it as null. Just punt on this
>     // issue for now by coercing out null. This is complicated by the
>     // fact that when most people write @this {Foo}, they really don't
>     // mean "nullable Foo". For certain tags (like @extends) we de-nullify
>     // the name for them.
871a880,882
>     if (maybeTypeOfThis != null) {
>       maybeTypeOfThis = maybeTypeOfThis.restrictByNotNullOrUndefined();
>     }


