org.apache.commons.lang.Entities

828c828
<             char c = str.charAt(i);
---
>             int c = Character.codePointAt(str, i); 
831c831,836
<                 if (c > 0x7F) {
---
>                 if (c >= 0x010000 && i < len - 1) {
>                     writer.write("&#");
>                     writer.write(Integer.toString(c, 10));
>                     writer.write(';');
>                     i++;
>                 } else if (c > 0x7F) { 


