26,29d25
<  * NOTE: This class is broken for any CharSequence implementation that does not define 
<  *       equals(Object) and hashCode() methods as the class uses the CharSequence as 
<  *       the key to a HashMap. See http://issues.apache.org/jira/browse/LANG-882.
<  * 
35c31
<     private final HashMap<CharSequence, CharSequence> lookupMap;
---
>     private final HashMap<String, CharSequence> lookupMap;
41a38,42
>      * Note that, as of Lang 3.1, the key to the lookup table is converted to a 
>      * java.lang.String, while the value remains as a java.lang.CharSequence. 
>      * This is because we need the key to support hashCode and equals(Object), 
>      * allowing it to be the key for a HashMap. See LANG-882.
>      *
45c46
<         lookupMap = new HashMap<CharSequence, CharSequence>();
---
>         lookupMap = new HashMap<String, CharSequence>();
50c51
<                 this.lookupMap.put(seq[0], seq[1]);
---
>                 this.lookupMap.put(seq[0].toString(), seq[1]);
76c77
<             final CharSequence result = lookupMap.get(subSeq);
---
>             final CharSequence result = lookupMap.get(subSeq.toString());
