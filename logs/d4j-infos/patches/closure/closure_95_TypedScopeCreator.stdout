894a895,897
>       // If n is a property, then we should really declare it in the
>       // scope where the root object appears. This helps out people
>       // who declare "global" names in an anonymous namespace.
895a899,908
>       if (n.getType() == Token.GETPROP && !scope.isGlobal() &&
>           isQnameRootedInGlobalScope(n)) {
>         Scope globalScope = scope.getGlobalScope();
> 
>         // don't try to declare in the global scope if there's
>         // already a symbol there with this name.
>         if (!globalScope.isDeclared(variableName, false)) {
>           scopeToDeclareIn = scope.getGlobalScope();
>         }
>       }
