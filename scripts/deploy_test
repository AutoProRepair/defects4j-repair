#!/bin/bash

echo 'Starting Lang deployment ...'

let 'bug = 1'

oarsub -O ~/defects4j-nopol/results/d4j-tests/lang/buggy/lang_${bug}_buggy.stdout -E ~/defects4j-nopol/results/d4j-tests/lang/buggy/lang_${bug}_buggy.stderr "cp -r ~/defects4j-nopol/defects4j /tmp/ && rm /tmp/defects4j/framework/core/Constants.pm && cp ~/defects4j-nopol/scripts/d4j-patch/Constants.pm /tmp/defects4j/framework/core/Constants.pm cd /tmp/ && ./defects4j/framework/bin/defects4j checkout -p Lang -v ${bug}b -w /tmp/lang_${bug}_buggy/ && cd lang_${bug}_buggy/ && ../defects4j/framework/bin/defects4j compile && time ../defects4j/framework/bin/defects4j test && cd .. && rm -rf defects4j/ lang_${bug}_buggy/"
