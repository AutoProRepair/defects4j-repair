#!/bin/bash

export PATH="~/defects4j/framework/bin:$PATH"

cp -r ~/projects/chart/chart_${1}/ /tmp/
cd /tmp/chart_${1}/
defects4j compile

lscpu | grep 'Architecture'
lscpu | grep 'Processeur'
lscpu | grep 'Thread'
lscpu | grep 'Vitesse'
lscpu | grep 'Cache'
echo ""
cat /proc/meminfo | grep 'MemTotal'
echo ""

cp ~/nopol/nopol-0.0.3-SNAPSHOT-jar-with-dependencies.jar .

time java -cp nopol-0.0.3-SNAPSHOT-jar-with-dependencies.jar fr.inria.lille.repair.Main ranking source/ build/:build-tests/:lib/servlet.jar:nopol-0.0.3-SNAPSHOT-jar-with-dependencies.jar

cd /tmp/
rm -rf chart_${1}/

echo 'Done.'
