#!/bin/bash

export PATH="~/defects4j/framework/bin:$PATH"

echo 'Chart 1'

defects4j checkout -p Chart -v 1b -w /tmp/chart_1
cd /tmp/chart_1/
defects4j compile

exec 6<&1
#exec 7<&2

exec 1> ~/defects4j-nopol/logs/nopol-ranking/chart/chart_1.stdout
#exec 2> ~/defects4j-nopol/logs/nopol-ranking/chart/chart_1.stderr

defects4j info -p Chart -v 1

cp ~/nopol/nopol-0.0.3-SNAPSHOT-jar-with-dependencies.jar .

java -cp nopol-0.0.3-SNAPSHOT-jar-with-dependencies.jar:build/:build-tests/ fr.inria.lille.repair.Main ranking source/ build/:build-tests/:nopol-0.0.3-SNAPSHOT-jar-with-dependencies.jar

cd /tmp/
rm -rf chart_1/

exec 1<&6 6<&-
#exec 2<&7 7<&-

echo 'Done'

